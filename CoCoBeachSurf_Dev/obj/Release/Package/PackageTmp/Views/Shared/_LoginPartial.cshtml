@using Microsoft.AspNet.Identity
@if (Request.IsAuthenticated)
{
    using (Html.BeginForm("LogOff", "Account", new { area = "" }, FormMethod.Post, new { id = "logoutForm", @class = "navbar-right",style= "margin-top: 20px" }))
    {
    @Html.AntiForgeryToken()
        <input type="hidden" id="token" />
        <a href="JavaScript:Void(0);" style="background:none">   </a>
        <div class="subnav">
            <button class="subnavbtn" style=" background-color: white;"><i class="fa fa-user" style="color:darkblue"></i> <i class="fa fa-caret-down" style="color:darkblue"></i></button>
            <div class="subnav-content" style="background-color: white; width: 200px; right: 31px; left: unset;">
                @*<a href="#company">Change Password</a>*@
                @Html.ActionLink("Change Password", "ChangePassword", "Manage", routeValues: new { area = "" }, htmlAttributes: new { title = "Manage", style = "color: darkblue" })
                <a style="color:darkblue" href="javascript:sessionStorage.removeItem('accessToken');$('#logoutForm').submit();">Log off</a>               
            </div>
        </div>
        @Html.ActionLink("Hello " + User.Identity.GetUserName() + "!", "Index", "Home", routeValues: new { area = "" }, htmlAttributes: new { title = "Manage",style= "color: darkblue;background-color: white;" })
        if (ViewBag.Role == 0)
        {
            @Html.ActionLink("User Management ", "UserManagement", "Manage", routeValues: new { area = "" }, htmlAttributes: new { title = "Manage", style = "color: darkblue;background-color: white;" })
            @*<div class="subnav">
                <button class="subnavbtn">Registration <i class="fa fa-caret-down"></i></button>
                <div class="subnav-content">
                   @Html.ActionLink("APP Registration ", "AppRegistration", "Home", routeValues: new { area = "" }, htmlAttributes: new { title = "Manage" })
                    @Html.ActionLink("User Registration", "UserRegister", "Home", routeValues: new { area = "" }, htmlAttributes: new { title = "Manage" })                  
                </div>
            </div>*@

            <div class="subnav" style = "background-color: white;" >
                <button class="subnavbtn" style="color: darkblue; background-color: white;">Management <i class="fa fa-caret-down" style="color:darkblue"></i></button>
                <div class="subnav-content" style = "background-color: white;    background-color: white;">
                    @*@Html.ActionLink("User Management ", "UserManagement", "Home", routeValues: new { area = "" }, htmlAttributes: new { title = "Manage" })*@
                    @Html.ActionLink("Device Management", "DeviceManagement", "Home", routeValues: new { area = "" }, htmlAttributes: new { title = "Manage" , style = "color: darkblue;background-color: white;" })
                    @Html.ActionLink("App Management", "AppManagement", "Home", routeValues: new { area = "" }, htmlAttributes: new { title = "Manage", style = "color: darkblue;background-color: white;" })
                </div>
            </div>
        }
        else if (ViewBag.Role == 1)
        {
            <div class="subnav" style = "background-color: white;">
                <button class="subnavbtn"   style="background-color: white;" >Management <i class="fa fa-caret-down"></i></button>
                <div class="subnav-content" style="background-color: white;">
                    @*@Html.ActionLink("User Management ", "UserManagement", "Home", routeValues: new { area = "" }, htmlAttributes: new { title = "Manage" })*@
                    @Html.ActionLink("App Management", "AppManagement", "Home", routeValues: new { area = "" }, htmlAttributes: new { title = "Manage", style = "color: darkblue;background-color: white;" })
                </div>
            </div>
        }












        
        }
 }
else
{
    <ul class="nav navbar-nav navbar-right">
        <li>@Html.ActionLink("Register", "Register", "Account", routeValues: new { area = "" }, htmlAttributes: new { id = "registerLink" })</li>
        <li>@Html.ActionLink("Log in", "Login", "Account", routeValues: new { area = "" }, htmlAttributes: new { id = "loginLink" })</li>
    </ul>
}
